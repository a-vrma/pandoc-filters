--[[ file: standard-code.lua
   
    Copyright (c) 2018 Aman Verma
    This code is licensed under the MIT license
    You should have received a copy of the license along with this software.
    If not, see <https://opensource.org/licenses/MIT>

    Turns <pre class="*"><code> into <pre><code class="language-*".
    Throws away all attributes, so it should come after any filters that use attributes.
--]]


languages = {
    1c,
    abnf,
    accesslog,
    actionscript,
    ada,
    angelscript,
    apache,
    applescript,
    arcade,
    arduino,
    armasm,
    asciidoc,
    aspectj,
    autohotkey,
    autoit,
    avrasm,
    awk,
    axapta,
    bash,
    basic,
    bnf,
    brainfuck,
    cal,
    capnproto,
    ceylon,
    clojure-repl,
    clojure,
    cmake,
    coffeescript,
    coq,
    cos,
    cpp,
    crmsh,
    crystal,
    cs,
    csp,
    css,
    d,
    dart,
    delphi,
    diff,
    django,
    dns,
    dockerfile,
    dos,
    dsconfig,
    dts,
    dust,
    ebnf,
    elixir,
    elm,
    erb,
    erlang-repl,
    erlang,
    excel,
    fix,
    flix,
    fortran,
    fsharp,
    gams,
    gauss,
    gcode,
    gherkin,
    glsl,
    gml,
    go,
    golo,
    gradle,
    groovy,
    haml,
    handlebars,
    haskell,
    haxe,
    hsp,
    htmlbars,
    http,
    hy,
    inform7,
    ini,
    irpf90,
    isbl,
    java,
    javascript,
    jboss-cli,
    json,
    julia-repl,
    julia,
    kotlin,
    lasso,
    ldif,
    leaf,
    less,
    lisp,
    livecodeserver,
    livescript,
    llvm,
    lsl,
    lua,
    makefile,
    markdown,
    mathematica,
    matlab,
    maxima,
    mel,
    mercury,
    mipsasm,
    mizar,
    mojolicious,
    monkey,
    moonscript,
    n1ql,
    nginx,
    nimrod,
    nix,
    nsis,
    objectivec,
    ocaml,
    openscad,
    oxygene,
    parser3,
    perl,
    pf,
    pgsql,
    php,
    plaintext,
    pony,
    powershell,
    processing,
    profile,
    prolog,
    properties,
    protobuf,
    puppet,
    purebasic,
    python,
    q,
    qml,
    r,
    reasonml,
    rib,
    roboconf,
    routeros,
    rsl,
    ruby,
    ruleslanguage,
    rust,
    sas,
    scala,
    scheme,
    scilab,
    scss,
    shell,
    smali,
    smalltalk,
    sml,
    sqf,
    sql,
    stan,
    stata,
    step21,
    stylus,
    subunit,
    swift,
    taggerscript,
    tap,
    tcl,
    tex,
    thrift,
    tp,
    twig,
    typescript,
    vala,
    vbnet,
    vbscript-html,
    vbscript,
    verilog,
    vhdl,
    vim,
    x86asm,
    xl,
    xml,
    xquery,
    yaml,
    zephir,
}


return {
    {
        CodeBlock = function(p)
            if not FORMAT == "html5" then
                return p
            end
            local preCode = string.format('<pre id="%s"><code class="language-%s">%s</code></pre>',
                p.identifier, table.concat(p.classes, " "), p.text)
            return pandoc.RawBlock("html5", preCode ,"RawBlock")
        end,

    }
}
